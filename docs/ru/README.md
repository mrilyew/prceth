### Overview

Prceth — python-приложение для организации и копирования контента. Поддерживается обращение через cli.py и web.py.

#### Структура

Файлы, логи, временные файлы находятся в сабдиректориях папки `storage`.

Данные хранятся в реляционной базе данных sqlite, файлы которой находится в `storage/dbs`. `content.db` предназначен для контента, `instance.db` для прочих данных. 

Логи из программы выводятся в файл (в названии текущая дата) в `storage/logs`, а так же в консоль. Модуль логгирования находится в `app/Logger.py`.

Настройки программы находятся в `storage/settings`, `config.json` — основные настройки, `env.json` — чувствительные данные. Основные настройки, с которыми сравниваются значения, находятся в `resources/DefaultSettings.py`. Модуль находится в `app/Config.py`.

Само приложение находится в файле `app/App.py`, который содержит основные модули (`config`, `env`, `storage`, `logger`, `db_connection`, `app`).

#### Модели (peewee)

`ContentUnit` (db/Models/Content) — собствена какой-либо контент в формате json. Имеет возможность привязки друг с другом (db/Relations/ContentUnitRelation) и создания превью.

`StorageUnit` (db/Models/Content) — представление директории с файлами из `storage/files/{00}`. Может содержать какое угодно количество файлов, но средни них должен быть основной.

`ServiceInstance` (db/Models/Instances) — настройки сервиса

#### Скрипты

Executable — класс, реализующий паттерн Command. Хранятся в директории `executables`. Каждый скрипт должен относиться к одной из категорий и размещён в директории с её названием.

Запрашиваемые аргументы находятся в методе declare(), основная логика в `execute()` с переданными args (но никто не мешает разбить на методы).

Скрипты делятся по предназначению: 

`representation` — Представление каких либо данных. Содержит субклассы `ExtractStrategy` и `Thumbnail`.

`extractor` — Получение данных, но другим методом. Можно сказать, для более сложной логики нежели ExtractStrategy.

`acts` — Получение или запись какой-либо информации. Через него вызываются все остальные скрипты.

`service` — Регулярно выполняющееся действие из `ServiceInstance`.

#### Запуск

Зависимости находятся в `requirements.txt`, для веб сервера `tornado-requirements.txt`

Для входа в venv:

```
cd [папка установки]
start.cmd
```

Для запуска act:

```
python act.py --i [имя акта] ...
```

Для запуска tornado:

```
python web.py
```
